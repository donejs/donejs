<!DOCTYPE html>

<!--[if lt IE 7]>
<html class="no-js ie lt-ie9 lt-ie8 lt-ie7" lang="en">
<![endif]-->
<!--[if IE 7]>
<html class="no-js ie lt-ie9 lt-ie8" lang="en">
<![endif]-->
<!--[if IE 8]>
<html class="no-js ie lt-ie9" lang="en">
<![endif]-->
<!--[if IE 9]>
<html class="no-js ie ie9" lang="en">
<![endif]-->
<!--[if gt IE 9]><!-->
<html class="no-js" lang="en">
<!--<![endif]-->
<head>
	<meta charset="utf-8">
  <title>donejs - Quick start guide</title>
	<meta property="og:title" content="donejs - Quick start guide">
	<meta property="og:description" content="In this guide, we will create chat.donejs.com, a small real-time chat application with a homepage showing a tabs widget and a messages page that lets us send and receive messages in real-time:  In the first part of this guide, we will install DoneJS, generate a new application and start a server that provides hot module swapping and server-side rendering. We will then import Bootstrap from npm, create our own custom HTML elements and set up routing between the homepage and the chat messages page. After that, we will complete both pages by adding a tabs widget to the homepage and the ability to send messages and receive real-time updates. In the final parts of the guide we will make an optimized, progressively loaded production build and deploy it to a CDN. We will conclude with creating a mobile and desktop version of the application. If you run into any problems, let us know on Slack (in the #donejs channel). We’re happy to help out!  For an even easier version of this guide, one that can be done entirely online, checkout CanJS’s Chat Guide. There, you&#x27;ll build the same chat widget in a JS Bin, but without a mobile or desktop build and deployment to a CDN. Similarly, if you are unfamiliar with module loading and module loaders, you may want to checkout StealJS’s Quick Start Guide before proceeding with this guide.">
  <meta property="og:image" content="https://www.bitovi.com/hubfs/open-source/os-donejs.jpg">
	<meta name="google-site-verification" content="-E1_on_BhUFqVXxNgtGgNYF5FIJojlOksLPK8zdeiL8" />
	<meta name="description" content="In this guide, we will create chat.donejs.com, a small real-time chat application with a homepage showing a tabs widget and a messages page that lets us send and receive messages in real-time:  In the first part of this guide, we will install DoneJS, generate a new application and start a server that provides hot module swapping and server-side rendering. We will then import Bootstrap from npm, create our own custom HTML elements and set up routing between the homepage and the chat messages page. After that, we will complete both pages by adding a tabs widget to the homepage and the ability to send messages and receive real-time updates. In the final parts of the guide we will make an optimized, progressively loaded production build and deploy it to a CDN. We will conclude with creating a mobile and desktop version of the application. If you run into any problems, let us know on Slack (in the #donejs channel). We’re happy to help out!  For an even easier version of this guide, one that can be done entirely online, checkout CanJS’s Chat Guide. There, you&#x27;ll build the same chat widget in a JS Bin, but without a mobile or desktop build and deployment to a CDN. Similarly, if you are unfamiliar with module loading and module loaders, you may want to checkout StealJS’s Quick Start Guide before proceeding with this guide.">
	<meta name="author" content="Bitovi - DoneJS">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
  <script type="application/ld+json">
		{
			"@context": "http://www.schema.org",
			"@type": "SoftwareSourceCode",
			"applicationCategory": "DeveloperApplication",
			"brand": "Bitovi",
			"category": "JavaScript Frameworks",
			"codeRepository": "https://github.com/donejs/donejs",
			"description": "In this guide, we will create chat.donejs.com, a small real-time chat application with a homepage showing a tabs widget and a messages page that lets us send and receive messages in real-time:  In the first part of this guide, we will install DoneJS, generate a new application and start a server that provides hot module swapping and server-side rendering. We will then import Bootstrap from npm, create our own custom HTML elements and set up routing between the homepage and the chat messages page. After that, we will complete both pages by adding a tabs widget to the homepage and the ability to send messages and receive real-time updates. In the final parts of the guide we will make an optimized, progressively loaded production build and deploy it to a CDN. We will conclude with creating a mobile and desktop version of the application. If you run into any problems, let us know on Slack (in the #donejs channel). We’re happy to help out!  For an even easier version of this guide, one that can be done entirely online, checkout CanJS’s Chat Guide. There, you&#x27;ll build the same chat widget in a JS Bin, but without a mobile or desktop build and deployment to a CDN. Similarly, if you are unfamiliar with module loading and module loaders, you may want to checkout StealJS’s Quick Start Guide before proceeding with this guide.",
			"image": "https://www.bitovi.com/hubfs/open-source/os-donejs.jpg",
			"license": "https://github.com/donejs/donejs/blob/master/license.md",
			"logo": "https://www.bitovi.com/hubfs/open-source/os-donejs.jpg",
			"name": "DoneJS - Quick start guide",
			"programmingLanguage": "JavaScript"
		}
	</script>
	<link rel="apple-touch-icon" sizes="57x57" href="static/img/favicons/apple-touch-icon-57x57.png">
	<link rel="apple-touch-icon" sizes="60x60" href="static/img/favicons/apple-touch-icon-60x60.png">
	<link rel="apple-touch-icon" sizes="72x72" href="static/img/favicons/apple-touch-icon-72x72.png">
	<link rel="apple-touch-icon" sizes="76x76" href="static/img/favicons/apple-touch-icon-76x76.png">
	<link rel="apple-touch-icon" sizes="114x114" href="static/img/favicons/apple-touch-icon-114x114.png">
	<link rel="apple-touch-icon" sizes="120x120" href="static/img/favicons/apple-touch-icon-120x120.png">
	<link rel="apple-touch-icon" sizes="144x144" href="static/img/favicons/apple-touch-icon-144x144.png">
	<link rel="apple-touch-icon" sizes="152x152" href="static/img/favicons/apple-touch-icon-152x152.png">
	<link rel="apple-touch-icon" sizes="180x180" href="static/img/favicons/apple-touch-icon-180x180.png">
	<link rel="icon" type="image/png" href="static/img/favicons/favicon-32x32.png" sizes="32x32">
	<link rel="icon" type="image/png" href="static/img/favicons/android-chrome-192x192.png" sizes="192x192">
	<link rel="icon" type="image/png" href="static/img/favicons/favicon-96x96.png" sizes="96x96">
	<link rel="icon" type="image/png" href="static/img/favicons/favicon-16x16.png" sizes="16x16">
	
		<link rel="stylesheet" type="text/css" href="./static/bundles/bit-docs-site/static.css">
	
	<link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Source+Code+Pro">
</head>
<body class="docs Guide">
		<div id="greyOutUnderNav" style="display:none;"></div>
		<header>
			<nav class="navbar navbar-default navbar-fixed-top">
				<div class="container">
					<!-- Brand and toggle get grouped for betteor mobile display -->
					<div class="navbar-header">
						<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
							<span class="sr-only">Toggle navigation</span>
							<span class="mobile-menu-label">MENU</span>
							<span class="mobile-menu-close"></span>
						</button>
						<div class="logo-menu">
							<a class="brand" href="./index.html">DoneJS</a>
							<ul class="dropdown-menu hidden-xs">
								<li><a href="https://donejs.com" class="active">DoneJS</a></li>
								<li><a href="https://canjs.com">CanJS</a></li>
								<li><a href="https://stealjs.com">StealJS</a></li>
								<li><a href="https://jquerypp.com">jQuery++</a></li>
								<li><a href="https://funcunit.com">FuncUnit</a></li>
								<li><a href="https://documentjs.com">DocumentJS</a></li>
							</ul>
						</div>
					</div>
					<div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
						<ul class="nav navbar-nav">
							<li ><a href="./index.html">Home</a></li>
							<li ><a href="./Features.html">Features</a></li>
							<li ><a href="./About.html">About</a></li>
							<li ><a href="./Apis.html">Apis</a></li>

							<li class="guides-menu">
								<a href="./Guides.html">Guides</a>
								<ul class="dropdown-menu">
									<li><a href="./SettingUp.html">Setting Up</a></li>
									<li><a href="./Guide.html">Quick Start</a></li>
									<li><a href="./place-my-order.html">In-depth</a></li>
									<li><a href="./plugin.html">Creating a plugin</a></li>
									<li><a href="./generator.html">Creating a generator</a></li>
									<li><a href="./bitballs.html">Example App: Bitballs</a></li>
                  <li><a href="./ssr-react.html">Server rendering React</a></li>
									<li><a href="./migrate-1.html">Migrate to DoneJS 1</a></li>
                  <li><a href="./migrate-2.html">Migrate to DoneJS 2</a></li>
                  <li><a href="./migrate-3.html">Migrate to DoneJS 3</a></li>
                  <li><a href="./updating-deps.html">Updating Dependencies</a></li>
									<li><a href="./contributing.html">Contributing</a></li>
								</ul>
							</li>

							<li >
								<a href="./community.html">Community</a>
							</li>
						</ul>

						<ul class="nav navbar-nav navbar-right bitovi-menu">
							<li class="dropdown">
								<a href="https://www.bitovi.com" class="bitovi icon-bits">Bitovi</a>
								<ul class="dropdown-menu">
									<li><a href="https://www.bitovi.com/">Bitovi.com</a></li>
									<li><a href="https://www.bitovi.com/blog">Blog</a></li>
									<li><a href="https://www.bitovi.com/design">Design</a></li>
									<li><a href="https://www.bitovi.com/development">Development</a></li>
									<li><a href="https://www.bitovi.com/training">Training</a></li>
									<li><a href="https://www.bitovi.com/open-source">Open Source</a></li>
									<li><a href="https://www.bitovi.com/about">About</a></li>
									<li><a href="https://www.bitovi.com/contact">Contact Us</a></li>
								</ul>
							</li>
						</ul>
						<ul class="menu-lib-logos hidden-sm hidden-md hidden-lg">
							<li>
								<a href="#">
									<img class="logo-canjs" src="static/img/lib-logos/canjs_logo.svg" />
									<span class="logo-label">CanJS</span>
								</a>
							</li>
							<li>
								<a href="#">
									<img class="logo-stealjs" src="static/img/lib-logos/stealjs-logo.svg" />
									<span class="logo-label">StealJS</span>
								</a>
							</li>
							<li>
								<a href="#">
									<img class="logo-jqueryplus" src="static/img/lib-logos/jquery-plusplus-logo.svg" />
									<span class="logo-label">jQuery++</span>
								</a>
							</li>
							<li>
								<a href="#">
									<img class="logo-funcunit" src="static/img/lib-logos/funcunit-logo.svg" />
									<span class="logo-label">FuncUnit</span>
								</a>
							</li>
							<li>
								<a href="#">
									<img class="logo-docjs" src="static/img/lib-logos/documentjs-logo.svg" />
									<span class="logo-label">DocumentJS</span>
								</a>
							</li>
						</ul>

					</div>
				</div>
			</nav>
		</header>

	<div class="scroll-spy-title hidden-md hidden-lg">
    <span class="menu-indicator menus-closed"></span>
		<div id="scrollSpyCurrentH2" class="h2Only">Table of Contents</div>
		<div id="scrollSpyCurrentH3"></div>
	</div>
	

	
	<div class="container-fluid api">
		<div class="row">
	
		

		
		<article class="content docs col-xs-12 ">
		

			
			<section class="title">
				<div class="heading">
<h1>Quick start guide</h1>
	<ul class="tags">
		<li>page</li>
	</ul>
	
	
</div>

<div class="sub-heading">
	
	
		<span class="module">Guide</span>
	
	
	
	<span class="inherits">&nbsp;</span>
</div>

<ul class="links">
	
	
	
</ul>
<br />

			</section>
			

      
      <section
        class="contents on-this-page-container"
        data-headings-container-selector=".content .comment"
        >
      </section>
      

			

			
			<section class="description">
				<p>In this guide, we will create <a href="https://chat.donejs.com">chat.donejs.com</a>, a small real-time chat application with a homepage showing a tabs widget and a messages page that lets us send and receive messages in real-time:
<img src="static/img/donejs-chat.gif" alt="chat.donejs.com" style="box-shadow: 2px 2px 2px 1px rgba(0, 0, 0, 0.2); border-radius: 5px; border: 1px #E7E7E7 solid;" /></p>
<p>In the first part of this guide, we will install DoneJS, <a href="./Features.html#generators">generate a new application</a> and start a server that provides <a href="./Features.html#hot-module-swapping">hot module swapping</a> and <a href="./Features.html#server-side-rendered">server-side rendering</a>. We will then <a href="./Features.html#npm-packages">import Bootstrap from npm</a>, create our <a href="./Features.html#custom-html-elements">own custom HTML elements</a> and <a href="./Features.html#pretty-urls-with-pushstate">set up routing</a> between the homepage and the chat messages page. After that, we will complete both pages by adding a tabs widget to the homepage and the ability to send messages and <a href="./Features.html#real-time-connected">receive real-time updates</a>.</p>
<p>In the final parts of the guide we will make an <a href="./Features.html#progressive-loading">optimized, progressively loaded production build</a> and <a href="./Features.html#deploy-to-a-cdn">deploy it to a CDN</a>. We will conclude with creating a <a href="./Features.html#ios-android-and-desktop-builds">mobile and desktop</a> version of the application.</p>
<p>If you run into any problems, let us know on <a href="https://www.bitovi.com/community/slack">Slack</a> (in the <a href="https://bitovi-community.slack.com/messages/CFC80DU5B">#donejs channel</a>). We’re happy to help out!</p>
<blockquote>
<p>For an even easier version of this guide, one that can be done entirely online, checkout <a href="https://canjs.com/doc/guides/chat.html">CanJS’s Chat Guide</a>. There, you'll build the same chat widget in a <a href="https://jsbin.com/">JS Bin</a>, but
without a mobile or desktop build and deployment to a CDN.</p>
<p>Similarly, if you are unfamiliar with module loading and module loaders, you may want to checkout <a href="https://stealjs.com/docs/StealJS.quick-start.html">StealJS’s Quick Start Guide</a> before proceeding with this guide.</p>
</blockquote>

			</section>
			

			
				
			

			


			
			<section class="comment">
				<h2>Setup</h2>
<p>In this section, we will install DoneJS and generate a new application.</p>
<blockquote>
<p>If you haven't already, check out the <a href="SettingUp.html" title="This page contains information on setting up DoneJS. It will walk you through getting prerequisites needed before you ever install DoneJS and includes platform-specific pieces of information not covered in the Quick Start or In Depth guides.
DoneJS officially supports:

Node 10 and up
npm 6.x and up">Setting Up DoneJS</a> guide to ensure you have all of the prerequisites installed and configured.</p>
</blockquote>
<h3>Install DoneJS</h3>
<p>To get started, let’s install the DoneJS command line utility globally:</p>
<pre><code class="language-shell">npm install -g donejs@3
</code></pre>
<h3>Generate the application</h3>
<p>Then we’ll create a new DoneJS application called <code>donejs-chat</code>:</p>
<pre><code class="language-shell">donejs add app donejs-chat --yes
</code></pre>
<p>This will create a new folder called <code>donejs-chat</code> and in it generate our application.</p>
<p>The initialization process will ask questions like the name of your application, the source folder, etc. We’ll answer these with the default settings by hitting enter.</p>
<p><img src="static/img/donejs-init.png" alt="donejs add app" style="box-shadow: 2px 2px 2px 1px rgba(0, 0, 0, 0.2); border-radius: 5px; border: 1px #E7E7E7 solid;" /></p>
<p>This will install all of DoneJS’s dependencies, including the following:</p>
<ul>
<li><a href="https://stealjs.com">StealJS</a> — ES6, CJS, and AMD module loader and builder</li>
<li><a href="https://canjs.com">CanJS</a> — Custom elements and Model-View-ViewModel utilities</li>
<li><a href="https://github.com/donejs/done-ssr">done-ssr</a> - Server-rendering</li>
<li><a href="https://qunitjs.com/">QUnit</a> — Assertion library (A <a href="https://github.com/donejs/donejs-mocha">Mocha</a> generator is also available)</li>
<li><a href="https://funcunit.com">FuncUnit</a> — Functional tests</li>
<li><a href="https://github.com/bitovi/testee">Testee</a> — JavaScript Test runner</li>
</ul>
<h3>Turn on development mode</h3>
<p>DoneJS comes with its own development server, which hosts your development files and automatically <a href="./Features.html#server-side-rendered">renders the application on the server</a>. Development mode enables <a href="./Features.html#hot-module-swapping">hot module swapping</a>, which automatically reloads files in the browser and on the server as they change.</p>
<p>To start it let’s go into the <code>donejs-chat</code> application directory:</p>
<pre><code class="language-shell">cd donejs-chat
</code></pre>
<p>We can start development mode by running:</p>
<pre><code class="language-shell">donejs develop
</code></pre>
<p>The default port is <code>8080</code>.</p>
<p>Go to <a href="http://localhost:8080/" title="http://localhost:8080/">http://localhost:8080/</a> to see our application showing a default homepage.</p>
<p><img src="static/img/donejs-homepage.png" alt="hello world" height="272" width="600" /></p>
<h2>Adding Bootstrap</h2>
<p>DoneJS makes it easy to import other projects that are published on <a href="https://npmjs.org">npm</a>. In this section, we will install and add <a href="https://getbootstrap.com/">Bootstrap</a> to the page, and see DoneJS’s <a href="./Features.html#hot-module-swapping">hot module swapping</a> in action.</p>
<h3>Install the npm package</h3>
<p>Open a new terminal window so we can keep the DoneJS development server running. Then, install the <a href="https://www.npmjs.com/package/bootstrap">Bootstrap npm package</a> and save it as a dependency of our application like this:</p>
<pre><code class="language-shell">npm install bootstrap@3 --save
</code></pre>
<h3>Add it to the page</h3>
<p>To see hot module swapping in action, let’s update the main template to import Bootstrap’s LESS file and also add some HTML that uses its styles.</p>
<p>Update <code>src/index.stache</code> to look like this:</p>
<pre><code class="language-html">&lt;html&gt;
  &lt;head&gt;
    &lt;title&gt;{{this.title}}&lt;/title&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;can-import from=&quot;bootstrap/less/bootstrap.less&quot; /&gt;
    &lt;can-import from=&quot;~/styles.less&quot; /&gt;
    &lt;can-import from=&quot;~/app&quot; export-as=&quot;viewModel&quot; route-data=&quot;routeData&quot; /&gt;

    &lt;div class=&quot;container&quot;&gt;
      &lt;div class=&quot;row&quot;&gt;
        &lt;div class=&quot;col-sm-8 col-sm-offset-2&quot;&gt;
          &lt;h1 class=&quot;page-header text-center&quot;&gt;
            &lt;img src=&quot;https://donejs.com/static/img/donejs-logo-white.svg&quot;
                alt=&quot;DoneJS logo&quot; style=&quot;width: 100%;&quot; /&gt;
            &lt;br&gt;Chat
          &lt;/h1&gt;
        &lt;/div&gt;
      &lt;/div&gt;
    &lt;/div&gt;

    {{#eq(this.env.NODE_ENV, &quot;production&quot;)}}
      &lt;script src=&quot;{{joinBase('steal.production.js')}}&quot;&gt;&lt;/script&gt;
    {{else}}
      &lt;script src=&quot;/node_modules/steal/steal.js&quot; main&gt;&lt;/script&gt;
    {{/eq}}
  &lt;/body&gt;
&lt;/html&gt;

</code></pre>
<div line-highlight='6,10-20,only'></div>
<blockquote>
<p>New APIs Used:</p>
<ul>
<li><a href="https://canjs.com/doc/can-view-import.html">&lt;can-import&gt;</a> — specifies template dependencies.</li>
</ul>
</blockquote>
<p>If you kept your browser window open at <a href="http://localhost:8080/" title="http://localhost:8080/">http://localhost:8080/</a> you should see the updated styles and content as soon as you save the file.</p>
<p><img src="static/img/donejs-bootstrap.png" alt="donejs add app" height="272" width="400" style="box-shadow: 2px 2px 2px 1px rgba(0, 0, 0, 0.2); border-radius: 5px; border: 1px #E7E7E7 solid;" /></p>
<p>Feel free to edit the HTML or <code>src/styles.less</code> to see how hot module swapping updates the page automatically.</p>
<h2>Routing and components</h2>
<p>In this part, we will create our own custom HTML elements — one for the homepage and another to display the chat messages. Then we will create routes to navigate between these two pages.</p>
<h3>Generate custom elements</h3>
<p>We’ll use a DoneJS <a href="./Features.html#generators">generator</a> to create custom components. The component generator is run by typing <code>donejs add component &lt;file-or-folder&gt; &lt;component-name&gt;</code>.</p>
<p>The homepage custom element (with the HTML tag name <code>chat-home</code>) won't be very big or complex, so we’ll put everything into a single <code>.component</code> file.</p>
<p>To generate it, run:</p>
<pre><code class="language-shell">donejs add component pages/home.component chat-home
</code></pre>
<p>The messages component (with the tag <code>chat-messages</code>) will be a little more complex, so we’ll generate it using the <a href="./Features.html#modlets">modlet file pattern</a>.</p>
<p>Now run:</p>
<pre><code class="language-shell">donejs add component pages/messages chat-messages
</code></pre>
<p><img src="static/img/donejs-generator.png" alt="chat.donejs.com" style="box-shadow: 2px 2px 2px 1px rgba(0, 0, 0, 0.2); border-radius: 5px; border: 1px #E7E7E7 solid;" /></p>
<p>Later we will update the generated files with the chat messages functionality.</p>
<h3>Navigate between pages</h3>
<blockquote>
<p>Routing works a bit differently than other libraries. In other libraries, you might declare routes and map those to controller-like actions. DoneJS application <a href="https://canjs.com/doc/can-route.html">routes</a> map URL strings (like /user/1) to properties on an observable. In other words, our routes will just be a representation of the application state. To learn more about routing visit the <a href="https://canjs.com/doc/guides/routing.html">CanJS Routing guide</a>.</p>
</blockquote>
<p>First, let’s update <code>src/pages/home.component</code> with the original content from the homepage and a link to the chat messages page:</p>
<pre><code class="language-html">&lt;can-component tag=&quot;chat-home&quot;&gt;
  &lt;style type=&quot;less&quot;&gt;
    display: block;

    h1.page-header { margin-top: 0; }
  &lt;/style&gt;
  &lt;view&gt;
    &lt;can-import from=&quot;can-stache-route-helpers&quot; /&gt;
    &lt;h1 class=&quot;page-header text-center&quot;&gt;
      &lt;img src=&quot;https://donejs.com/static/img/donejs-logo-white.svg&quot;
           alt=&quot;DoneJS logo&quot; style=&quot;width: 100%;&quot; /&gt;
      &lt;br&gt;Chat
    &lt;/h1&gt;

    &lt;a href=&quot;{{routeUrl(page='chat')}}&quot;
       class=&quot;btn btn-primary btn-block btn-lg&quot;&gt;
      Start chat
    &lt;/a&gt;
  &lt;/view&gt;
&lt;/can-component&gt;

</code></pre>
<div line-highlight='5,8-18,only'></div>
<blockquote>
<p>New APIs Used:</p>
<ul>
<li><a href="https://github.com/donejs/done-component#done-component">done-component</a> — a <a href="https://stealjs.com/">StealJS</a> plugin for CanJS <a href="https://canjs.com/doc/can-component.html">components</a> that allows you to define a component completely within a  <em>.component</em> file.</li>
<li><a href="https://canjs.com/doc/can-stache.helpers.routeUrl.html"><code>routeUrl</code></a> — a helper that populates the anchor’s href with a URL that sets the <code>page</code> property to <code>&quot;chat&quot;</code> on <a href="https://canjs.com/doc/can-route.data.html">route.data</a>.</li>
</ul>
</blockquote>
<p>Next, add a link to go back to the homepage from the chat page by updating <code>src/pages/messages/messages.stache</code> to:</p>
<pre><code class="language-html">&lt;can-import from=&quot;can-stache-route-helpers&quot; /&gt;
&lt;h5&gt;&lt;a href=&quot;{{routeUrl(page='home')}}&quot;&gt;Home&lt;/a&gt;&lt;/h5&gt;
&lt;p&gt;{{this.message}}&lt;/p&gt;

</code></pre>
<div line-highlight='1-2,only'></div>
<blockquote>
<p>New APIs Used:</p>
<ul>
<li><a href="https://canjs.com/doc/can-define/map/map.html">DefineMap</a> — used to define observable types.</li>
<li><a href="https://canjs.com/doc/can-route.html">route</a> — used to map changes in the URL to changes on the route.data <code>page</code> property.</li>
</ul>
</blockquote>
<h3>Switch between pages</h3>
<p>Finally we'll glue together these components as separate pages. Our Application ViewModel is where we determine which page to show. This is done by determining the <code>pageComponent</code>, an instance of a <a href="https://canjs.com/doc/can-component.html">can-component</a>, based on the <code>route.data.page</code> property.</p>
<p>Add the following two new properties to <code>src/app.js</code>:</p>
<pre><code class="language-js">import { DefineMap, route } from 'can';
import RoutePushstate from 'can-route-pushstate';
import debug from 'can-debug#?./is-dev';

//!steal-remove-start
if(debug) {
    debug();
}
//!steal-remove-end

const AppViewModel = DefineMap.extend(&quot;AppViewModel&quot;, {
  env: {
    default: () =&gt; ({NODE_ENV:'development'})
  },
  title: {
    default: 'donejs-chat'
  },
  routeData: {
    default: () =&gt; route.data
  },
  pageComponentModuleName: {
    get() {
      switch (this.routeData.page) {
        case 'chat': return '~/pages/messages/';
        default: return '~/pages/home.component';
      }
    }
  },
  pageComponent: {
    get() {
      return steal.import(this.pageComponentModuleName)
      .then(({default: Component}) =&gt; {
        return new Component();
      });
    }
  }
});

route.urlData = new RoutePushstate();
route.register(&quot;{page}&quot;, { page: &quot;home&quot; });

export default AppViewModel;

</code></pre>
<div line-highlight='20-36,only'></div>
<p>This imports the chosen page's module and then instantiates a new instance using <code>new Component()</code>. We can use this component by placing it in the <code>index.stache</code>:</p>
<pre><code class="language-html">&lt;html&gt;
  &lt;head&gt;
    &lt;title&gt;{{this.title}}&lt;/title&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;can-import from=&quot;bootstrap/less/bootstrap.less&quot; /&gt;
    &lt;can-import from=&quot;~/styles.less&quot; /&gt;
    &lt;can-import from=&quot;~/app&quot; export-as=&quot;viewModel&quot; route-data=&quot;routeData&quot; /&gt;

    &lt;div class=&quot;container&quot;&gt;
      &lt;div class=&quot;row&quot;&gt;
        &lt;div class=&quot;col-sm-8 col-sm-offset-2&quot;&gt;
          {{#if(this.pageComponent.isResolved)}}
            {{this.pageComponent.value}}
          {{else}}
            Loading...
          {{/if}}
        &lt;/div&gt;
      &lt;/div&gt;
    &lt;/div&gt;

    {{#eq(this.env.NODE_ENV, &quot;production&quot;)}}
      &lt;script src=&quot;{{joinBase('steal.production.js')}}&quot;&gt;&lt;/script&gt;
    {{else}}
      &lt;script src=&quot;/node_modules/steal/steal.js&quot; main&gt;&lt;/script&gt;
    {{/eq}}
  &lt;/body&gt;
&lt;/html&gt;

</code></pre>
<div line-highlight='13-17,only'></div>
<blockquote>
<p>New APIs Used:</p>
<ul>
<li><a href="https://stealjs.com/docs/steal.import.html">steal.import</a> - imports the pageComponentModuleName dynamically.</li>
<li><a href="https://canjs.com/doc/can-component.html#newComponent__options__">new Component()</a> - creates new instance of the component imported.</li>
<li><a href="https://canjs.com/doc/can-stache.helpers.if.html">{{#if(isResolved)}}</a> — Renders the components once their modules have loaded.</li>
<li><a href="https://canjs.com/doc/can-stache.helpers.else.html">{{else}}</a> — renders <em>&quot;Loading&quot;</em> while the modules are loading.</li>
</ul>
</blockquote>
<p>Now each component is being dynamically loaded while navigating between the home and messages page.  You should see the changes already in your browser.</p>
<p><img src="static/img/donejs-chat1.png" alt="chat.donejs.com" height="302" width="400" style="box-shadow: 2px 2px 2px 1px rgba(0, 0, 0, 0.2); border-radius: 5px; border: 1px #E7E7E7 solid;" /></p>
<h2>Homepage</h2>
<p>Now that we can navigate between pages, we will finish implementing their functionality, starting with the homepage.</p>
<h3>Install bit-tabs</h3>
<p>On the homepage, let’s install and add <a href="https://github.com/bitovi-components/bit-tabs">bit-tabs</a>, a simple declarative tabs widget.</p>
<p>Run:</p>
<pre><code class="language-shell">npm install bit-tabs@2 --save
</code></pre>
<h3>Update the page</h3>
<p>Then, import the unstyled custom elements from <code>bit-tabs/unstyled</code> (unstyled because we will use Bootstrap’s styles) and add <code>&lt;bit-tabs&gt;</code> and <code>&lt;bit-panel&gt;</code> elements to the template.</p>
<p>Update <code>src/pages/home.component</code> to:</p>
<pre><code class="language-html">&lt;can-component tag=&quot;chat-home&quot;&gt;
  &lt;style type=&quot;less&quot;&gt;
    display: block;

    bit-panel p {
      padding: 10px;
    }
  &lt;/style&gt;
  &lt;view&gt;
    &lt;can-import from=&quot;can-stache-route-helpers&quot; /&gt;
    &lt;can-import from=&quot;bit-tabs/unstyled&quot; /&gt;
    &lt;h1 class=&quot;page-header text-center&quot;&gt;
      &lt;img src=&quot;https://donejs.com/static/img/donejs-logo-white.svg&quot;
        alt=&quot;DoneJS logo&quot; style=&quot;width: 100%;&quot; /&gt;
      &lt;br&gt;Chat
    &lt;/h1&gt;

    &lt;bit-tabs tabsClass:raw=&quot;nav nav-tabs&quot;&gt;
      &lt;bit-panel title:raw=&quot;CanJS&quot;&gt;
        &lt;p&gt;CanJS provides the MV*&lt;/p&gt;
      &lt;/bit-panel&gt;
      &lt;bit-panel title:raw=&quot;StealJS&quot;&gt;
        &lt;p&gt;StealJS provides the infrastructure.&lt;/p&gt;
      &lt;/bit-panel&gt;
    &lt;/bit-tabs&gt;

    &lt;a href=&quot;{{routeUrl(page='chat')}}&quot;
       class=&quot;btn btn-primary btn-block btn-lg&quot;&gt;
      Start chat
    &lt;/a&gt;
  &lt;/view&gt;
&lt;/can-component&gt;

</code></pre>
<div line-highlight='5-7,11,18-25,only'></div>
<p>You'll notice tabs appear in the browser:</p>
<p><img src="static/img/donejs-tabs.png" alt="chat.donejs.com" height="437" width="400" style="box-shadow: 2px 2px 2px 1px rgba(0, 0, 0, 0.2); border-radius: 5px; border: 1px #E7E7E7 solid;" /></p>
<h2>Messages page</h2>
<p>In this section we add live chat functionality to the messages page. We’ll need to:</p>
<ul>
<li>Create a messages model that connects to a RESTful API.</li>
<li>Add the ability to retrieve and list messages and create new messages.</li>
<li>Make the message list receive real-time updates from other clients.</li>
</ul>
<h3>Generate Message model</h3>
<p>To load messages from the server, we will use <a href="https://canjs.com/doc/can-connect/can/super-map/super-map.html">can-connect’s supermodel</a>.</p>
<p>Generate a <code>message</code> supermodel like this:</p>
<pre><code class="language-shell">donejs add supermodel message
</code></pre>
<p>When asked for the URL endpoint, set it to our remote RESTful API at <code>https://chat.donejs.com/api/messages</code>. When it asks if https://chat.donejs.com is your service URL answer <code>Yes</code>. The other questions can be answered with the default by hitting enter.</p>
<p><img src="static/img/donejs-model-generator.png" alt="model generator" style="box-shadow: 2px 2px 2px 1px rgba(0, 0, 0, 0.2); border-radius: 5px; border: 1px #E7E7E7 solid;" /></p>
<p>Update <code>src/models/message.js</code> to:</p>
<pre><code class="language-js">import { DefineMap, DefineList, superModel } from 'can';
import loader from '@loader';

const Message = DefineMap.extend('Message', {
  seal: false
}, {
  'id': {
    type: 'any',
    identity: true
  },
  name: 'string',
  body: 'string'
});

Message.List = DefineList.extend('MessageList', {
  '#': Message
});

Message.connection = superModel({
  url: loader.serviceBaseURL + '/api/messages',
  Map: Message,
  List: Message.List,
  name: 'message'
});

export default Message;

</code></pre>
<div line-highlight='10-12'></div>
<blockquote>
<p>New APIs Used:</p>
<ul>
<li><a href="https://canjs.com/doc/can-query-logic.html">QueryLogic</a> — used to describe a service-layer’s parameters. For example if <code>&quot;api/messages?limit=20&quot;</code> only returned 20 messages, you would configure the <code>limit</code> parameter behavior in the connection’s <code>queryLogic</code>.</li>
<li><a href="https://canjs.com/doc/can-define/list/list.html">DefineList</a> — used to define the behavior of an observable list of <code>Message</code>s.</li>
<li><a href="https://canjs.com/doc/can-super-model.html">superModel</a> — connects the <code>Message</code> type to the<br />
restful <code>'/api/messages'</code> service. This adds <a href="https://canjs.com/doc/can-connect/real-time/real-time.html">real-time</a>, <a href="https://canjs.com/doc/can-connect/fall-through-cache/fall-through-cache.html">fall-through-caching</a> and other useful behaviors.</li>
<li><a href="https://stealjs.com/docs/@loader.html">loader</a> — references the module loader that is loading this code. All configuration
in your <em>package.json</em>’s &quot;steal&quot; property is available, including the <code>serviceBaseUrl</code>.</li>
</ul>
</blockquote>
<h3>Use the connection</h3>
<p>The generated file is all that is needed to connect to our RESTful API. Use it by importing it and requesting a list of all messages.</p>
<p>Update <code>src/pages/messages/messages.js</code> to:</p>
<pre><code class="language-js">import { Component } from 'can';
import './messages.less';
import view from './messages.stache';
import Message from '../../models/message';

export default Component.extend({
  tag: 'chat-messages',
  view,
  ViewModel: {
    // EXTERNAL STATEFUL PROPERTIES
    // These properties are passed from another component. Example:
    // value: {type: &quot;number&quot;}

    // INTERNAL STATEFUL PROPERTIES
    // These properties are owned by this component.
    message: { default: &quot;This is the chat-messages component&quot; },

    // DERIVED PROPERTIES
    // These properties combine other property values. Example:
    // get valueAndMessage(){ return this.value + this.message; }
    get messagesPromise() {
      return Message.getList({});
    },

    // METHODS
    // Functions that can be called by the view. Example:
    // incrementValue() { this.value++; }

    // SIDE EFFECTS
    // The following is a good place to perform changes to the DOM
    // or do things that don't fit in to one of the areas above.
    connectedCallback(element){

    }
  }
});

</code></pre>
<div line-highlight='4,21-23,only'></div>
<blockquote>
<p>New APIs Used:</p>
<ul>
<li><a href="https://canjs.com/doc/can-connect/connection.getList.html">getList</a> — returns a promise that resolves to a <code>Message.List</code> of <code>Message</code> instances.</li>
</ul>
</blockquote>
<p>Display the messages by updating <code>src/pages/messages/messages.stache</code> to:</p>
<pre><code class="language-html">&lt;can-import from=&quot;can-stache-route-helpers&quot; /&gt;
&lt;h5&gt;&lt;a href=&quot;{{routeUrl(page='home')}}&quot;&gt;Home&lt;/a&gt;&lt;/h5&gt;

{{#if(this.messagesPromise.isResolved)}}
  {{#for(message of this.messagesPromise.value)}}
    &lt;div class=&quot;list-group-item&quot;&gt;
      &lt;h4 class=&quot;list-group-item-heading&quot;&gt;{{message.name}}&lt;/h4&gt;
      &lt;p class=&quot;list-group-item-text&quot;&gt;{{message.body}}&lt;/p&gt;
    &lt;/div&gt;
  {{else}}
    &lt;div class=&quot;list-group-item&quot;&gt;
      &lt;h4 class=&quot;list-group-item-heading&quot;&gt;No messages&lt;/h4&gt;
    &lt;/div&gt;
  {{/for}}
{{/if}}

</code></pre>
<div line-highlight='4-15,only'></div>
<blockquote>
<p>New APIs Used:</p>
<ul>
<li><a href="https://canjs.com/doc/can-stache.helpers.each.html">{{#each}}</a> — loops through each <code>Message</code> instance.</li>
<li><a href="https://canjs.com/doc/can-stache.tags.escaped.html">{{key}}</a> — reads either the name or body of a
<code>Message</code> instance and inserts it into the output of the template.</li>
</ul>
</blockquote>
<p>If you open <a href="http://localhost:8080/chat">localhost:8080/chat</a>, you will see a list of messages from the server or the &quot;No message&quot; text.</p>
<p><img src="static/img/donejs-chat2.png" alt="chat.donejs.com" height="272" width="400" style="box-shadow: 2px 2px 2px 1px rgba(0, 0, 0, 0.2); border-radius: 5px; border: 1px #E7E7E7 solid;" /></p>
<h3>Create messages</h3>
<p>Now let’s add the form to create new messages. The form will two-way bind the <code>name</code> and <code>body</code> properties to the component’s view-model and calls <code>send()</code> when hitting the enter key in the message input.</p>
<p>First we have to implement the <code>send()</code> method. Update <code>src/pages/messages/messages.js</code> to this:</p>
<pre><code class="language-js">import { Component } from 'can';
import './messages.less';
import view from './messages.stache';
import Message from '../../models/message';

export default Component.extend({
  tag: 'chat-messages',
  view,
  ViewModel: {
    // EXTERNAL STATEFUL PROPERTIES
    // These properties are passed from another component. Example:
    // value: {type: &quot;number&quot;}

    // INTERNAL STATEFUL PROPERTIES
    // These properties are owned by this component.
    name: 'string',
    body: 'string',

    // DERIVED PROPERTIES
    // These properties combine other property values. Example:
    // get valueAndMessage(){ return this.value + this.message; }
    get messagesPromise() {
      return Message.getList({});
    },

    // METHODS
    // Functions that can be called by the view. Example:
    // incrementValue() { this.value++; }
    send(event) {
      event.preventDefault();

      new Message({
        name: this.name,
        body: this.body
      }).save().then(msg =&gt; this.body = '');
    },

    // SIDE EFFECTS
    // The following is a good place to perform changes to the DOM
    // or do things that don't fit in to one of the areas above.
    connectedCallback(element){

    }
  }
});

</code></pre>
<div line-highlight='16-17,29-36,only'></div>
<blockquote>
<p>New APIs Used:</p>
<ul>
<li><a href="https://canjs.com/doc/can-connect/connection.save.html">save()</a> — creates a <code>POST</code> request to <code>/api/messages</code> with
the message data.</li>
</ul>
</blockquote>
<p>The <code>send()</code> method takes the <code>name</code> and <code>message</code> properties from the view-model and creates a <code>Message</code> instance, saving it to the server. Once saved successfully, it sets the message to an empty string to reset the input field.</p>
<p>Next update <code>src/pages/messages/messages.stache</code> to look like this:</p>
<pre><code class="language-html">&lt;can-import from=&quot;can-stache-route-helpers&quot; /&gt;
&lt;h5&gt;&lt;a href=&quot;{{routeUrl(page='home')}}&quot;&gt;Home&lt;/a&gt;&lt;/h5&gt;

{{#if(this.messagesPromise.isResolved)}}
  {{#for(message of this.messagesPromise.value)}}
    &lt;div class=&quot;list-group-item&quot;&gt;
      &lt;h4 class=&quot;list-group-item-heading&quot;&gt;{{message.name}}&lt;/h4&gt;
      &lt;p class=&quot;list-group-item-text&quot;&gt;{{message.body}}&lt;/p&gt;
    &lt;/div&gt;
  {{else}}
    &lt;div class=&quot;list-group-item&quot;&gt;
      &lt;h4 class=&quot;list-group-item-heading&quot;&gt;No messages&lt;/h4&gt;
    &lt;/div&gt;
  {{/for}}
{{/if}}

&lt;form class=&quot;row&quot; on:submit=&quot;this.send(scope.event)&quot;&gt;
  &lt;div class=&quot;col-sm-3&quot;&gt;
    &lt;input type=&quot;text&quot; class=&quot;form-control&quot; placeholder=&quot;Your name&quot;
           value:bind=&quot;this.name&quot; /&gt;
  &lt;/div&gt;
  &lt;div class=&quot;col-sm-6&quot;&gt;
    &lt;input type=&quot;text&quot; class=&quot;form-control&quot; placeholder=&quot;Your message&quot;
           value:bind=&quot;this.body&quot; /&gt;
  &lt;/div&gt;
  &lt;div class=&quot;col-sm-3&quot;&gt;
    &lt;input type=&quot;submit&quot; class=&quot;btn btn-primary btn-block&quot; value=&quot;Send&quot; /&gt;
  &lt;/div&gt;
&lt;/form&gt;

</code></pre>
<div line-highlight='17-29,only'></div>
<blockquote>
<p>New APIs Used:</p>
<ul>
<li><a href="https://canjs.com/doc/can-stache-bindings.event.html">on:submit</a> — listens to <em>submit</em> events and calls
the <code>send()</code> method on the ViewModel.</li>
<li><a href="https://canjs.com/doc/can-stache-bindings.twoWay.html">value:bind</a> — two-way bindings a <code>&lt;input&gt;</code>’s value
to a property of the ViewModel.</li>
</ul>
</blockquote>
<p>You can now enter your name and a message! It will automatically appear in our messages list.</p>
<p><img src="static/img/donejs-chat3.png" alt="chat.donejs.com" height="289" width="400" style="box-shadow: 2px 2px 2px 1px rgba(0, 0, 0, 0.2); border-radius: 5px; border: 1px #E7E7E7 solid;" /></p>
<p>In fact, all lists that are related to that model will be updated automatically whenever there is new, modified, or deleted data. <a href="https://canjs.com/doc/can-connect.html">can-connect</a> automatically manages the lists, while also providing <a href="./Features.html#caching-and-minimal-data-requests">caching and minimized data requests</a>.</p>
<p>You can see from your console that the localStorage cache is already populated with data:</p>
<p><img src="static/img/donejs-localstorage.png" alt="chat.donejs.com" style="box-shadow: 2px 2px 2px 1px rgba(0, 0, 0, 0.2); border-radius: 5px; border: 1px #E7E7E7 solid;" /></p>
<h3>Enable a real-time connection</h3>
<p>Right now our chat’s messages update automatically with our own messages, but not with messages from other clients. The API server (<a href="https://chat.donejs.com/api/messages">chat.donejs.com/api/messages</a>) provides a <a href="https://socket.io/">Socket.io</a> server that sends out real-time updates for new, updated and deleted chat messages.</p>
<p>To connect to it, first we’ll install a socket.io connector, by running:</p>
<pre><code class="language-shell">npm install steal-socket.io --save
</code></pre>
<p>Update <code>src/models/message.js</code> to:</p>
<pre><code class="language-js">import { DefineMap, DefineList, superModel } from 'can';
import loader from '@loader';
import io from 'steal-socket.io';

const Message = DefineMap.extend('Message', {
  seal: false
}, {
  'id': {
    type: 'any',
    identity: true
  },
  name: 'string',
  body: 'string'
});

Message.List = DefineList.extend('MessageList', {
  '#': Message
});

Message.connection = superModel({
  url: loader.serviceBaseURL + '/api/messages',
  Map: Message,
  List: Message.List,
  name: 'message'
});

const socket = io(loader.serviceBaseURL);

socket.on('messages created',
  message =&gt; Message.connection.createInstance(message));
socket.on('messages updated',
  message =&gt; Message.connection.updateInstance(message));
socket.on('messages removed',
  message =&gt; Message.connection.destroyInstance(message));

export default Message;

</code></pre>
<div line-highlight='3,27-34,only'></div>
<blockquote>
<p>New APIs used:</p>
<ul>
<li><a href="https://canjs.com/doc/can-connect/real-time/real-time.createInstance.html">createInstance</a> — tells the real-time
system that a message has been created.</li>
<li><a href="https://canjs.com/doc/can-connect/real-time/real-time.updateInstance.html">updateInstance</a> — tells the real-time
system that a message has been updated.</li>
<li><a href="https://canjs.com/doc/can-connect/real-time/real-time.destroyInstance.html">destroyInstance</a> — tells the real-time
system that a message has been destroyed.</li>
</ul>
</blockquote>
<p>This will listen to <code>messages &lt;event&gt;</code> events sent by the server and tell the connection to update all active lists of messages accordingly. Try opening another browser window to see receiving messages in real-time.</p>
<p><img src="static/img/donejs-twobrowsers.png" alt="two browsers" style="box-shadow: 2px 2px 2px 1px rgba(0, 0, 0, 0.2); border-radius: 5px; border: 1px #E7E7E7 solid;" /></p>
<h2>Production build</h2>
<p>Now that we implemented the complete chat functionality we can get our application ready for production.</p>
<h3>Run build</h3>
<p>We can find the build configuration in <code>build.js</code> in the application folder.</p>
<p>Everything is already set up, so we can simply make a build by running:</p>
<pre><code class="language-shell">donejs build
</code></pre>
<p>The optimized bundles that load your JavaScript and CSS as fast as possible are sent to the <code>dist/</code> folder.</p>
<h3>Turn on production</h3>
<p>To test the production build, close the current server (with <code>CTRL + C</code>) and start it with the environment (<code>NODE_ENV</code>) set to <code>production</code>:</p>
<pre><code class="language-shell">NODE_ENV=production donejs start
</code></pre>
<p>If you’re using Windows, you must first set the environmental variable:</p>
<ol>
<li>For Windows <strong>command prompt</strong> you set with <code>set NODE_ENV=production</code></li>
<li>For Windows <strong>Powershell</strong> you set it with <code>$env:NODE_ENV=&quot;production&quot;</code></li>
</ol>
<p>Then run your application with <code>donejs start</code>.</p>
<p>If we now open <a href="http://localhost:8080/">localhost:8080</a> again we can see the production bundles being loaded in the network tab of the developer tools.</p>
<p><img src="static/img/donejs-prodmode.png" alt="two browsers" style="box-shadow: 2px 2px 2px 1px rgba(0, 0, 0, 0.2); border-radius: 5px; border: 1px #E7E7E7 solid;" /></p>
<p>All DoneJS projects are extremely modular, which is why in development mode, you see 200 or more requests when loading the page (thanks to hot-module swapping, we only have to make those requests once). In production mode, we can see only about 8 requests and a significantly reduced file-size.</p>
<h2>Deploy</h2>
<p>Now that we verified that our application works in production, we can deploy it to the web. In this section, we will use <a href="https://firebase.google.com/">Firebase</a>, a service that provides static file hosting and <a href="https://en.wikipedia.org/wiki/Content_delivery_network">Content Delivery Network</a> (CDN) support, to automatically deploy and serve our application’s static assets from a CDN.</p>
<h3>Set up Firebase</h3>
<p>Sign up for free at <a href="https://firebase.google.com/">Firebase</a>. After you have an account go to <a href="https://console.firebase.google.com/">Firebase console</a> and create an app called <code>donejs-chat-&lt;user&gt;</code> where <code>&lt;user&gt;</code> is your GitHub username. Write down the name of your app because you'll need it in the next section.</p>
<blockquote>
<p>You'll get an error if your app name is too long, so pick something on the shorter side. After you're created your app be sure to note the Firebase <strong>ID</strong>, as this is the information you need to enter in the next section.</p>
</blockquote>
<p>When you deploy for the first time it will ask you to authorize, but first we need to configure the project.</p>
<h3>Configure DoneJS</h3>
<p>Now we can add the Firebase deployment configuration to our <code>package.json</code> like this:</p>
<pre><code class="language-shell">donejs add firebase
</code></pre>
<p>When prompted, enter the name of the application created when you set up the Firebase app. Before you can deploy your app you need to login and authorize the Firebase tools, which you can do with:</p>
<pre><code class="language-shell">node_modules/.bin/firebase login
</code></pre>
<p>Then we can deploy the application by running:</p>
<pre><code class="language-shell">donejs build
donejs deploy
</code></pre>
<p>Static files are deployed to Firebase.</p>
<p><img src="static/img/donejs-firebase.png" alt="two browsers" /></p>
<p>And verify that the application is loading from the CDN by loading it after running:</p>
<pre><code class="language-shell">NODE_ENV=production donejs start
</code></pre>
<blockquote>
<p>If you’re using Windows, set the NODE_ENV variable as you did previously in the Production section.</p>
</blockquote>
<p>We should now see our assets being loaded from the Firebase CDN.</p>
<p><img src="static/img/donejs-deploy.png" alt="two browsers" style="box-shadow: 2px 2px 2px 1px rgba(0, 0, 0, 0.2); border-radius: 5px; border: 1px #E7E7E7 solid;" /></p>
<h2>Desktop and mobile apps</h2>
<p>In the last part of this guide we will make mobile and desktop builds of our chat application, using <a href="https://cordova.apache.org/">Cordova</a> and <a href="https://electron.atom.io/">Electron</a>.</p>
<h3>Cordova</h3>
<p>To build the application as a Cordova based mobile application, you need to have each platform’s SDK installed.
We’ll be building an iOS app if you are a Mac user, and an Android app if you’re a Windows user.</p>
<p>Mac users should download XCode from the AppStore and install the <code>ios-sim</code> package globally with:</p>
<pre><code class="language-shell">npm install -g ios-sim
</code></pre>
<p>We will use these tools to create an iOS application that can be tested in the iOS simulator.</p>
<p>Windows users should install the <a href="https://developer.android.com/sdk/index.html">Android Studio</a>, which gives all of the tools we need.</p>
<p>Now we can install the DoneJS Cordova tools with:</p>
<pre><code class="language-shell">donejs add cordova@2
</code></pre>
<p>Depending on your operating system you can accept most of the defaults, unless you would like to build for Android, which needs to be selected from the list of platforms.</p>
<p>To run the Cordova build and launch the simulator we can now run:</p>
<pre><code class="language-shell">donejs build cordova
</code></pre>
<p>If everything went well, we should see the emulator running our application.</p>
<p><img src="static/img/donejs-ios.png" alt="ios build" height="590" width="320" style="box-shadow: 2px 2px 2px 1px rgba(0, 0, 0, 0.2); border-radius: 5px; border: 1px #E7E7E7 solid;" /></p>
<p>Windows users will get instructions to download the latest version of the platform and to create a Virtual Device. Follow the instructions and then re-do the build. This will only happen the first time you build for Cordova.</p>
<p><strong>Note:</strong> if you receive the error <code>Error: Cannot read property 'replace' of undefined</code>, you can work around it by running <code>cd build/cordova/platforms/ios/cordova/ &amp;&amp; npm install ios-sim@6</code> until <a href="https://git-wip-us.apache.org/repos/asf?p=cordova-ios.git;a=commit;h=4490abf273ec6d12810c8ff5ea16d197c58ecd4b">this patch</a> is released.</p>
<h3>Electron</h3>
<p>To set up the desktop build, we have to add it to our application like this:</p>
<pre><code class="language-shell">donejs add electron@2
</code></pre>
<p>Accept the default for all of the prompts.</p>
<p><img src="static/img/donejs-electron-prompt.png" alt="electron prompt" style="box-shadow: 2px 2px 2px 1px rgba(0, 0, 0, 0.2); border-radius: 5px; border: 1px #E7E7E7 solid;" /></p>
<p>Then we can run the build like this:</p>
<pre><code class="language-shell">donejs build electron
</code></pre>
<p>The macOS application can be opened with</p>
<pre><code class="language-shell">open build/donejs-chat-darwin-x64/donejs-chat.app
</code></pre>
<p>The Windows application can be opened with</p>
<pre><code class="language-shell">.\build\donejs-chat-win32-x64\donejs-chat.exe
</code></pre>
<p><img src="static/img/donejs-electron-app.png" alt="electron app" style="box-shadow: 2px 2px 2px 1px rgba(0, 0, 0, 0.2); border-radius: 5px; border: 1px #E7E7E7 solid;" /></p>
<h2>What’s next?</h2>
<p>In this guide we created a small chat application that connects to a remote API with DoneJS. It has routing between two pages and can send and receive messages in real-time. We built an optimized bundle for production and deployed it to a static file host and CDN. Last, we made builds of the application as a mobile and desktop application.</p>
<p>If you want to learn more about DoneJS - like how to create more complex custom elements and routes, write and automatically run tests, Continuous Integration and Continuous Deployment - head over to the <a href="./place-my-order.html">place-my-order Guide</a>.</p>
<p>If you’re not ready for that yet, we might suggest the following guides:</p>
<ul>
<li>CanJS’s <a href="https://canjs.com/doc/guides/todomvc.html">TodoMVC Guide</a> and <a href="https://canjs.com/doc/guides/atm.html">ATM Guide</a> — to better familiarize yourself with CanJS (DoneJS’s models, views, and observables).</li>
<li>StealJS’s <a href="https://stealjs.com/docs/StealJS.guides.progressive_loading.html">Progressive Loading Guide</a> — to better familiarize yourself with StealJS (DoneJS’s module loader and builder).</li>
</ul>

			</section>
			
			

			

			

		
		</article>
		

	
		</div>
	</div>
	

<survey-ad>
  <button aria-label="Close" class="close" type="button">
    <span aria-hidden="true">&times;</span>
  </button>
  <a href="https://donejs.com/survey.html">
    Help us improve DoneJS by taking our community survey
  </a>
</survey-ad>


	
	<footer>
		<div class="container">
			<div class="row">
				<div class="col-xs-12 col-sm-8">
					<div class="col-xs-1 footer-brand">
						<a href="/"><img src="static/img/donejs-logo-final-02.svg"></a>
					</div>

					<ul class="footer-nav-main list-stacked">
						<li>
							<a href="/">HOME</a>
						</li>
						<li>
							<a href="./Features.html">FEATURES</a>
						</li>
						<li>
							<a href="./About.html">ABOUT</a>
						</li>
						<li>
							<a href="./Apis.html">APIS</a>
						</li>
						<li>
							<a href="./Guides.html">GUIDES</a>
						</li>
						<li>
							<a href="./community.html">COMMUNITY</a>
						</li>
					</ul>
				</div>
				<div class="col-xs-12 col-sm-4">
					<ul class="footer-nav-social list-stacked">
						<li>
							<a href="https://github.com/donejs">
								<img class="footer-social-icon" src="static/img/icon-github-white.svg" alt="Github">
							</a>
						</li>
						<li>
							<a href="https://twitter.com/donejs">
								<img class="footer-social-icon" src="static/img/icon-twitter-white.svg" alt="Twitter">
							</a>
						</li>
						<li>
							<a href="https://plus.google.com/+Bitovi/posts">
								<img class="footer-social-icon" src="static/img/icon-googleplus-white.svg" alt="Google+">
							</a>
						</li>
						<li>
							<a href="https://www.youtube.com/channel/UCEnTQUfJi0L6l7g8IRuaVkg">
								<img class="footer-social-icon" src="static/img/icon-youtube-white.svg" alt="YouTube">
							</a>
						</li>
					</ul>
				</div>
				<div class="clear"></div>
				<div class="footer-copyright col-sm-12">
					&copy; <a href="https://www.bitovi.com/">2015-2019 Bitovi, Inc.</a>
				</div>
			</div>
		</div>
	</footer>
	

	<script type="text/javascript">
		var docObject = {"src":{"path":"docs/guides/guide.md"},"description":"In this guide, we will create [chat.donejs.com](https://chat.donejs.com), a small real-time chat application with a homepage showing a tabs widget and a messages page that lets us send and receive messages in real-time: \n<img src=\"static/img/donejs-chat.gif\" alt=\"chat.donejs.com\" style=\"box-shadow: 2px 2px 2px 1px rgba(0, 0, 0, 0.2); border-radius: 5px; border: 1px #E7E7E7 solid;\" />\n\nIn the first part of this guide, we will install DoneJS, [generate a new application](./Features.html#generators) and start a server that provides [hot module swapping](./Features.html#hot-module-swapping) and [server-side rendering](./Features.html#server-side-rendered). We will then [import Bootstrap from npm](./Features.html#npm-packages), create our [own custom HTML elements](./Features.html#custom-html-elements) and [set up routing](./Features.html#pretty-urls-with-pushstate) between the homepage and the chat messages page. After that, we will complete both pages by adding a tabs widget to the homepage and the ability to send messages and [receive real-time updates](./Features.html#real-time-connected).\n\nIn the final parts of the guide we will make an [optimized, progressively loaded production build](./Features.html#progressive-loading) and [deploy it to a CDN](./Features.html#deploy-to-a-cdn). We will conclude with creating a [mobile and desktop](./Features.html#ios-android-and-desktop-builds) version of the application.\n\nIf you run into any problems, let us know on [Slack](https://www.bitovi.com/community/slack) (in the [#donejs channel](https://bitovi-community.slack.com/messages/CFC80DU5B)). We’re happy to help out!\n\n> For an even easier version of this guide, one that can be done entirely online, checkout [CanJS’s Chat Guide](https://canjs.com/doc/guides/chat.html). There, you'll build the same chat widget in a [JS Bin](https://jsbin.com/), but\nwithout a mobile or desktop build and deployment to a CDN.\n>\n>\n> Similarly, if you are unfamiliar with module loading and module loaders, you may want to checkout [StealJS’s Quick Start Guide](https://stealjs.com/docs/StealJS.quick-start.html) before proceeding with this guide.\n\n","name":"Guide","title":"Quick start guide","type":"page","parent":"Guides","hideSidebar":true,"outline":{"depth":2,"tag":"ol"},"comment":" ","pathToRoot":".."};
	</script>

	
		<script type="text/javascript">
		  steal = {
		    instantiated: {
		      "bundles/bit-docs-site/static.css!$css" : null
		    }
		  };
		</script>
		<script
			data-main="bit-docs-site/static"
			src="./static/steal.production.js"
		>
		</script>
	

	<script>
	 (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	 (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	 m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	 })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

	 ga('create', 'UA-2302003-14', 'auto');
	 ga('send', 'pageview');
	</script>
</body>
</html>
